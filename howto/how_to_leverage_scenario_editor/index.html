<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>How to Leverage Scenario Editor - Apollo Docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "How to Leverage Scenario Editor";
    var mkdocs_page_input_path = "howto/how_to_leverage_scenario_editor.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Apollo Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../quickstart/">Get Started</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Cyber RT</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../cyber/">Introduction to Cyber RT</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../cyber/CyberRT_Quick_Start/">Cyber RT Quick Start</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">D-Kit</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../specs/D-kit/readme/">Introduction to D-Kit</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../FAQs/">FAQs</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Apollo Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>How to Leverage Scenario Editor</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/storypku/apollo/edit/master/docs/howto/how_to_leverage_scenario_editor.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="how-to-leverage-scenario-editor">How to Leverage Scenario Editor</h2>
<h3 id="introduction">Introduction</h3>
<p>Simulation plays a central role in Apollo’s internal development cycle. Dreamland empowers developers and start-ups to run millions of miles of simulation daily, which dramatically accelerates the development cycle.</p>
<p>So far Apollo simulation allowed external users to access over 200 sample scenarios which includes a diverse range of LogSim scenarios based on real world driving data and WorldSim scenarios that have been manually created by our simulation team. To learn more about Dreamland, refer to <a href="https://github.com/ApolloAuto/apollo/blob/master/docs/specs/Dreamland_introduction.md">our Dreamland Introduction Guide</a></p>
<p>Several developers wrote in requesting that our Dreamland platform should support Scenario Creation and Editing which the Apollo team now proudly presents in Apollo 5.0!</p>
<h3 id="setting-up-scenario-editor">Setting up Scenario Editor</h3>
<ol>
<li>
<p>Login to your Dreamland account. For additional details on How to create an account, please refer to <a href="https://github.com/ApolloAuto/apollo/blob/master/docs/specs/Dreamland_introduction.md">our Dreamland Introduction Guide</a> </p>
</li>
<li>
<p>Once inside the platform, the Scenario Editor can be accessed under <code>Scenario Management</code> or using the <a href="https://azure.apollo.auto/scenario-management/scenario-editor">following link</a></p>
<p><img alt="" src="../images/se_location1.png" /></p>
</li>
<li>
<p>Once inside, you will have to complete the form on the screen as seen in the image below. As this app is in Beta testing, it is not open to all our developers.</p>
<p><img alt="" src="https://github.com/ApolloAuto/apollo/blob/master/docs/specs/images/form.png" /></p>
</li>
<li>
<p>You should receive the following activation confirmation via email within 3 business days:</p>
</li>
</ol>
<p><img alt="" src="https://github.com/ApolloAuto/apollo/blob/master/docs/specs/images/email.png" /></p>
<h3 id="using-scenario-editor">Using Scenario Editor</h3>
<p>Congratulations! You are now ready to use our scenario editor.</p>
<ol>
<li>
<p>The first step is to select a map. Currently, we offer 2 maps - Sunnyvale and San Mateo</p>
<p><img alt="" src="../images/se_map.png" /></p>
</li>
<li>
<p>Once a map has been selected, you will have access to the editor pane on the right along with other tools as seen below:</p>
<p><img alt="" src="../images/se_tools.png" /></p>
</li>
</ol>
<p>You can navigate through the map using your arrow keys. Alternatively, you can right-click the mouse and drag it to move the map. If you are using a trackpad, you will have to double click and then drag with two fingers.
Let's understand each tool along with its purpose</p>
<h4 id="general-action-tools">General Action Tools</h4>
<p>The 4 General action tools can be found on the bottom right corner of the map. </p>
<ol>
<li>
<p><strong>Zoom tool</strong>: while you can use your trackpad to zoom in and out of the map, there exists the Zoom tool to help you zoom in and out of the map in case you do not have a trackpad ready.</p>
<p><img alt="" src="../images/se_zoom1.png" /></p>
</li>
<li>
<p><strong>Re-center tool</strong>: this tool allows you to locate your ego-car on the map even if you have moved away</p>
<p><img alt="" src="../images/se_center1.png" /></p>
</li>
<li>
<p><strong>Ruler tool</strong>: this tool allows you to measure the distance between two points. This tool is extremely useful when calculating the distance between the ego-car and obstacles or traffic lights on the map.</p>
<p><img alt="" src="../images/se_ruler.png" />  <img alt="" src="../images/se_distance.png" /></p>
</li>
<li>
<p><strong>Add Route tool</strong>: this tool can be used both for the ego-car as well as the obstacles you set in its path. For the ego-car you can only set its destination, but for obstacles, you can set multiple points that define their driving behavior. </p>
<p><img alt="" src="../images/se_addroute.png" />
 </p>
<h4 id="configuration-tools">Configuration Tools</h4>
</li>
</ol>
<p>There are 4 types of configurations that you will need to set up in order to create a scenario, three of which are listed on the left-side of the map - General, Ego-car and Participants (Obstacles) and the last one is Traffic Light</p>
<p><img alt="" src="../images/se_config.png" /></p>
<h5 id="general-configuration">General Configuration</h5>
<p>This configuration tool is selected by default upon the selection of a map. The form on your right requests general scenario information like the scenario name, duration, road structure, ego-car behavior along with which metrics you would like to track. Please note some fields are required while some are based on your discretion. Once you have set and confirmed all the parameters, please proceed to the <code>Ego Car</code> configuration tool.</p>
<p>You can learn more about each parameter by hovering over the <code>?</code> sign next to each parameter.</p>
<h5 id="ego-car-configuration">Ego Car Configuration</h5>
<p>This configuration tool allows you to set your Ego car on the map and configure its parameters. As soon as you select the tool icon, you can then hover over the map and place the car at your desired location. You will notice that your mouse pointer will turn into a cross until you place the ego-car on your map. Once placed, a form should appear on the right-hand side of the map, which allows you to configure the Ego car to set its speed, acceleration, along with your desired destination.</p>
<p><img alt="" src="../images/se_ego.png" /></p>
<p>The Ego car's heading can also be set by dragging the arrow linked to the ego car</p>
<p><img alt="" src="../images/heading.png" /></p>
<pre><code>Note: 
You can set the ego car’s end point by clicking on the “Add Route Point” icon in the lower right corner of the map. Described in the General Action tools section. 
</code></pre>

<p>Once you have placed the Ego car's end point on the map, The end point coordinates will then appear on the right-hand attribute's window. You can drag the end point flag to change the ego car’s end point location. The “End point” coordinates will be automatically updated accordingly.</p>
<p><img alt="" src="../images/endpoints1.png" /></p>
<p>Finally, you can always come back and edit the existing attributes of the ego car by clicking on the ego car on the map. This will open its attributes tab in the right-hand attributes window.</p>
<h5 id="participants-configuration">Participants' Configuration</h5>
<p>If you select <code>Participant</code> from the configuration menu, you can place your participant in your scenario by clicking on a desired location on the map. You will notice that your mouse pointer will turn into a cross until you place the new participant on your map. Once you place it, a form will appear on the right-hand attributes window as it did with <code>Ego Car</code>. Before you edit the fields on the form, you can change the position of the participant by clicking and dragging it. You can also modify its heading by clicking on the arrow head. Once you have finalized the heading and position of your participant, you can start working on specific details mentioned in the form - type, length, speed and motion type. </p>
<p><img alt="" src="../images/obstacle.png" /></p>
<p>In the Basic Information section, you will notice an auto-generated ID along with a description textbox. You could give your participant a suitable ID as well as a description about its expected behavior. You could also specify what is your participant's type, which will be set to <code>Car</code> by default. Upon selecting a different type, the participant on your screen will change accordingly. You will also need to determine its initial speed and other attributes including width, length and height. There are predetermined values for each vehicle type, which can be changed. </p>
<p>In the Initial State section, you will need to set the speed of the participant which can be either set in <code>m/s</code> or <code>km/hr</code>. The coordinates and heading of the participant are preset and can be changed by directly editing the participant's position on the map.</p>
<p>In Runtime Configuration, you can set whether the participant is mobile or static. Should you select static, you have finished setting up your participant and are ready to save. </p>
<p>If you select mobile instead, you would need to set its <code>Trigger Type</code>. Once you have completed your mobile participant setup, click on the <code>add route point</code> button to set the participant's trajectory points as seen in the image below. </p>
<p><img alt="" src="../images/se_addroute.png" /></p>
<p>You can set a single destination, or add several points in between. You will also be able to add speed and change the speed of your participant on the form from one point to the next. Also, you can edit the location of the point on the screen by clicking on and dragging it to its desired locaiton.</p>
<p>Finally, if you have added several trajectory points and do not know how to go back to your participant, you can use the <code>Re-center tool</code> (which is similar to the General Action re-center tool), but this re-center tool only works for your participants. </p>
<p><img alt="" src="../images/center2.png" /></p>
<p>Your final participant screen should appear as follows:</p>
<p><img alt="" src="../images/final_obs.png" /></p>
<h5 id="traffic-light-configuration">Traffic Light Configuration</h5>
<p>This configuration tool will allow you to edit the traffic lights that are a part of your scenario. To activate this tool, look for a traffic light on the map and click on it which opens a configuration form on the right-hand side of your window. You will notice 2 constant attricutes ID and its coordinates.
However, you will need to select a trigger type for the traffic light:
- <strong>Distance</strong> - the traffic light will be triggered by the distance between the ego car and the light
- <strong>Time</strong> -  the light will be triggered by the scenario run time</p>
<p><img alt="" src="../images/traffic_light.png" /></p>
<p>You will also be required to set the <code>Initial State</code> of the traffic light. And once your trigger type is set, you will also be required to complete the <code>States</code> section, in terms of color and light durations for each state. If the traffic lights have reached the end of their configured states before the end of the scenario, the last state will remain until the end.</p>
<h3 id="saving-a-scenario">Saving a Scenario</h3>
<p>You can save your scenario by clicking on <code>Save</code> in the file menu.</p>
<pre><code>Note:
The minimum requirements of saving a scenario are to configure all required attributes in the “General” and “Ego Car” configurations. If not, a pop-up window with a failure message will highlight what you are still required to configure.
</code></pre>

<h3 id="running-a-new-scenario">Running a New Scenario</h3>
<ol>
<li>To locate and run your scenario requires you to trigger a <code>New Task</code> under <code>Task Management</code></li>
</ol>
<p><img alt="" src="../images/new_scenario.png" /></p>
<ol>
<li>click on <code>Select Scenarios</code></li>
</ol>
<p><img alt="" src="../images/select_scenario.png" /></p>
<ol>
<li>You can then search for your newly created scenario. An easy way to filter your private scenarios is to perform an instance search for your username in the <code>Search scenarios</code> field. </li>
</ol>
<p><img alt="" src="../images/instance.png" /></p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/storypku/apollo/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
